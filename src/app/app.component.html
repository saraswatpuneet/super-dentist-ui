<div class="app" fxLayout="column" [ngClass]="theme">

  <mat-card class="sd-toolbar mat-elevation-z3" [ngClass]="{'opac': opacMode}" fxLayout="row" fxLayoutAlign=" center">
    <div class="nav-title" routerLink='referrals' *ngIf="!opacMode">

      <img src="assets/icons/superdentist.svg" alt="">
    </div>

    <span fxFlex></span>

    <span class="welcome" *ngIf="clinicName && authenticated">Welcome, {{clinicName}}</span>

    <div *ngIf="home" class="early-access-container">
      <div *ngIf="theme !== 'light'" [@sidebarToggle] class="early-access" (click)="showEarlyAccess()">Request Early
        Access</div>
      <div *ngIf="theme === 'light'" [@sidebarToggle] class="early-access-light" (click)="showEarlyAccess()">Request
        Early Access</div>
    </div>
    <button mat-icon-button [matMenuTriggerFor]="menu" *ngIf="authenticated">
      <mat-icon>arrow_drop_down</mat-icon>
    </button>

    <!-- <app-notification *ngIf="authenticated"></app-notification> -->

    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="signOut()">Sign Out</button>
    </mat-menu>

    <button mat-icon-button class="top-right" (click)="toggleTheme()">
      <mat-icon [@coin] *ngIf="theme !== 'dark'">nights_stay</mat-icon>
      <mat-icon [@coin] *ngIf="theme === 'dark'">wb_sunny</mat-icon>
    </button>
  </mat-card>

  <div [ngClass]="{'full-h': !authenticated}" class="contain" fxLayout="row">
    <mat-card class="sidenav mat-elevation-z7" *ngIf="authenticated" fxLayout="column"
      [ngClass]="{'collapsed-sidenav': !expanded}">

      <a mat-button [matTooltip]="navItems[0].label" matTooltipPosition="after" [matTooltipDisabled]="expanded"
        matTooltipShowDelay="750" routerLinkActive="active" [routerLink]="navItems[0].path" class="nav-item">
        <mat-icon>{{navItems[0].icon}}</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>{{navItems[0].label}}</span>
      </a>

      <a mat-button [matTooltip]="navItems[1].label" matTooltipPosition="after" [matTooltipDisabled]="expanded"
        matTooltipShowDelay="750" routerLinkActive="active" [routerLink]="navItems[1].path" class="nav-item">
        <mat-icon>{{navItems[1].icon}}</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>{{navItems[1].label}}</span>
      </a>

      <a mat-button [matTooltip]="navItems[3].label" matTooltipPosition="after" [matTooltipDisabled]="expanded"
        matTooltipShowDelay="750" routerLinkActive="active" *ngIf="isAdmin" [routerLink]="navItems[3].path"
        class="nav-item">
        <mat-icon>{{navItems[3].icon}}</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>{{navItems[3].label}}</span>
      </a>

      <a mat-button [matTooltip]="navItems[4].label" matTooltipPosition="after" [matTooltipDisabled]="expanded"
        matTooltipShowDelay="750" routerLinkActive="active" [routerLink]="navItems[4].path" class="nav-item">
        <mat-icon>{{navItems[4].icon}}</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>{{navItems[4].label}}</span>
      </a>

      <a mat-button [matTooltip]="navItems[2].label" matTooltipPosition="after" [matTooltipDisabled]="expanded"
        matTooltipShowDelay="750" routerLinkActive="active" *ngIf="isSpecialist" [routerLink]="navItems[2].path"
        class="nav-item">
        <mat-icon>{{navItems[2].icon}}</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>{{navItems[2].label}}</span>
      </a>

      <span fxFlex></span>

      <div (click)="toggleNav()" class="nav-item collapse">
        <mat-icon>keyboard_arrow_left</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>&copy; 2021 Super Doctor Labs LLC</span>
      </div>
    </mat-card>

    <div class="content">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>