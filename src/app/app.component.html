<div class="app" fxLayout="column" [ngClass]="theme">

  <mat-card class="sd-toolbar mat-elevation-z3" fxLayout="row" fxLayoutAlign=" center">
    <div class="nav-title" routerLink='referrals'>

      <img src="assets/images/brand.svg" alt="">
      <span>SuperDentist</span>
    </div>

    <span fxFlex></span>

    <span class="welcome" *ngIf="clinicName && authenticated">Welcome, {{clinicName}}</span>

    <button mat-icon-button [matMenuTriggerFor]="menu" *ngIf="authenticated">
      <mat-icon>arrow_drop_down</mat-icon>
    </button>

    <!-- <app-notification *ngIf="authenticated"></app-notification> -->

    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="signOut()">Sign Out</button>
    </mat-menu>

    <button mat-icon-button class="top-right" (click)="toggleTheme()">
      <mat-icon [@coin] *ngIf="theme !== 'dark'">nights_stay</mat-icon>
      <mat-icon [@coin] *ngIf="theme === 'dark'">wb_sunny</mat-icon>
    </button>
  </mat-card>

  <div [ngClass]="{'full-h': !authenticated}" class="contain" fxLayout="row">
    <mat-card class="sidenav mat-elevation-z7" *ngIf="authenticated" fxLayout="column"
      [ngClass]="{'collapsed-sidenav': !expanded}">

      <a mat-button routerLinkActive="active" [routerLink]="navItems[0].path" class="nav-item">
        <mat-icon>{{navItems[0].icon}}</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>{{navItems[0].label}}</span>
      </a>

      <a mat-button routerLinkActive="active" [routerLink]="navItems[1].path" class="nav-item">
        <mat-icon>{{navItems[1].icon}}</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>{{navItems[1].label}}</span>
      </a>

      <a mat-button routerLinkActive="active" *ngIf="isSpecialist" [routerLink]="navItems[2].path" class="nav-item">
        <mat-icon>{{navItems[2].icon}}</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>{{navItems[2].label}}</span>
      </a>

      <a mat-button routerLinkActive="active" *ngIf="isAdmin" [routerLink]="navItems[3].path" class="nav-item">
        <mat-icon>{{navItems[3].icon}}</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>{{navItems[3].label}}</span>
      </a>

      <span fxFlex></span>

      <div (click)="toggleNav()" class="nav-item collapse">
        <mat-icon>keyboard_arrow_left</mat-icon>
        <span *ngIf="expanded" [@sidebarToggle]>&copy; 2021 Super Doctor Labs LLC</span>
      </div>
    </mat-card>

    <div class="content">
      <mat-card *ngIf="authenticated && !emailVerified" class="verify-banner">
        Please verify your email. <span>Didn't get the email? </span> <a routerLink="verify">Click here</a>
      </mat-card>
      <router-outlet></router-outlet>
    </div>
  </div>
</div>